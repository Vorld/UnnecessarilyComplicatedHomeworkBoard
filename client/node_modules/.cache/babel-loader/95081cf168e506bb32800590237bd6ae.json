{"ast":null,"code":"import React,{useEffect,Fragment}from'react';import{connect}from'react-redux';import{getTasks,deleteTask,addTask}from'../../actions/task';import{getCurrentProfile}from'../../actions/profile';import Moment from'react-moment';import Alert from'../layout/Alert';import AddTask from'./AddTask';import{IconButton,Chip,List,ListItem,ListItemText,ListItemSecondaryAction,CircularProgress,Container,Box,Typography,Icon}from'@material-ui/core/';var Tasks=function Tasks(_ref){var getTasks=_ref.getTasks,deleteTask=_ref.deleteTask,getCurrentProfile=_ref.getCurrentProfile,_ref$task=_ref.task,tasks=_ref$task.tasks,taskLoading=_ref$task.loading,_ref$profile=_ref.profile,profile=_ref$profile.profile,profileLoading=_ref$profile.loading;useEffect(function(){getCurrentProfile();},[]);// eslint-disable-line\nuseEffect(function(){if(profile){getTasks(profile.subjects);}},[getTasks,profile]);return profileLoading&&profile===null||taskLoading&&profile?/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\",m:1,p:1},/*#__PURE__*/React.createElement(CircularProgress,null)):/*#__PURE__*/React.createElement(Container,null,profile?/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(Box,{mt:2,mb:2},/*#__PURE__*/React.createElement(AddTask,null)),/*#__PURE__*/React.createElement(Alert,null),tasks.length>0?/*#__PURE__*/React.createElement(List,null,tasks.map(function(task){return/*#__PURE__*/React.createElement(ListItem,{className:\"collection-item\"},/*#__PURE__*/React.createElement(ListItemText,{primary:task.name,secondary:/*#__PURE__*/React.createElement(Moment,{calendar:{sameDay:'[Today]',nextDay:'[Tomorrow]',nextWeek:'[This] dddd',lastDay:'[Yesterday]',lastWeek:'[Last] dddd',sameElse:'DD MMM YYYY'}},new Date(task.due))}),/*#__PURE__*/React.createElement(Chip,{label:task.subject}),/*#__PURE__*/React.createElement(ListItemSecondaryAction,null,/*#__PURE__*/React.createElement(IconButton,{edge:\"end\",onClick:function onClick(e){return deleteTask(task._id);},className:\"secondary-content right\"},/*#__PURE__*/React.createElement(Icon,null,\"clear\"))));})):/*#__PURE__*/React.createElement(Box,{m:1,p:1},/*#__PURE__*/React.createElement(Typography,{align:\"center\",variant:\"subtitle1\"},\"Rejoice! You are (temporarily) free from the clutches of the education system!\"))):/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\",m:1,p:1},/*#__PURE__*/React.createElement(Typography,null,\"Set up your subjects!\")));};var mapStateToProps=function mapStateToProps(state){return{task:state.task,profile:state.profile};};export default connect(mapStateToProps,{getTasks:getTasks,deleteTask:deleteTask,addTask:addTask,getCurrentProfile:getCurrentProfile})(Tasks);","map":{"version":3,"sources":["/var/www/hwboard.tk/client/src/components/tasks/Tasks.js"],"names":["React","useEffect","Fragment","connect","getTasks","deleteTask","addTask","getCurrentProfile","Moment","Alert","AddTask","IconButton","Chip","List","ListItem","ListItemText","ListItemSecondaryAction","CircularProgress","Container","Box","Typography","Icon","Tasks","task","tasks","taskLoading","loading","profile","profileLoading","subjects","length","map","name","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","Date","due","subject","e","_id","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useEffect, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { getTasks, deleteTask, addTask } from '../../actions/task';\nimport { getCurrentProfile } from '../../actions/profile';\n\nimport Moment from 'react-moment';\n\nimport Alert from '../layout/Alert';\nimport AddTask from './AddTask';\n\nimport {\n  IconButton,\n  Chip,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n  CircularProgress,\n  Container,\n  Box,\n  Typography,\n  Icon,\n} from '@material-ui/core/';\n\nconst Tasks = ({\n  getTasks,\n  deleteTask,\n  getCurrentProfile,\n  task: { tasks, loading: taskLoading },\n  profile: { profile, loading: profileLoading },\n}) => {\n  useEffect(() => {\n    getCurrentProfile();\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if (profile) {\n      getTasks(profile.subjects);\n    }\n  }, [getTasks, profile]);\n\n  return (profileLoading && profile === null) || (taskLoading && profile) ? (\n    <Box display='flex' justifyContent='center' m={1} p={1}>\n      <CircularProgress />\n    </Box>\n  ) : (\n    <Container>\n      {profile ? (\n        <Fragment>\n          <Box mt={2} mb={2}>\n            <AddTask />\n          </Box>\n          <Alert />\n\n          {tasks.length > 0 ? (\n            <List>\n              {tasks.map((task) => (\n                <ListItem className='collection-item'>\n                  <ListItemText\n                    primary={task.name}\n                    secondary={\n                      <Moment\n                        calendar={{\n                          sameDay: '[Today]',\n                          nextDay: '[Tomorrow]',\n                          nextWeek: '[This] dddd',\n                          lastDay: '[Yesterday]',\n                          lastWeek: '[Last] dddd',\n                          sameElse: 'DD MMM YYYY',\n                        }}\n                      >\n                        {new Date(task.due)}\n                      </Moment>\n                    }\n                  />\n                  <Chip label={task.subject} />\n                  <ListItemSecondaryAction>\n                    <IconButton\n                      edge='end'\n                      onClick={(e) => deleteTask(task._id)}\n                      className='secondary-content right'\n                    >\n                      <Icon>clear</Icon>\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n            </List>\n          ) : (\n            <Box m={1} p={1}>\n              <Typography align='center' variant='subtitle1'>\n                Rejoice! You are (temporarily) free from the clutches of the\n                education system!\n              </Typography>\n            </Box>\n          )}\n        </Fragment>\n      ) : (\n        <Box display='flex' justifyContent='center' m={1} p={1}>\n          <Typography>Set up your subjects!</Typography>\n        </Box>\n      )}\n    </Container>\n  );\n};\n\nTasks.propTypes = {\n  getTasks: PropTypes.func.isRequired,\n  addTask: PropTypes.func.isRequired,\n  deleteTask: PropTypes.func.isRequired,\n  getCurrentProfile: PropTypes.func.isRequired,\n  task: PropTypes.object.isRequired,\n  profile: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  task: state.task,\n  profile: state.profile,\n});\n\nexport default connect(mapStateToProps, {\n  getTasks,\n  deleteTask,\n  addTask,\n  getCurrentProfile,\n})(Tasks);\n"]},"metadata":{},"sourceType":"module"}