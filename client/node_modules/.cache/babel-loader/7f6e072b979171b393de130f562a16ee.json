{"ast":null,"code":"import _toConsumableArray from\"/var/www/hwboard.tk/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/var/www/hwboard.tk/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{connect}from'react-redux';import{loadSubjects}from'../../actions/subjects';import{updateProfile}from'../../actions/profile';import Alert from'../layout/Alert';import{Box,CircularProgress,Container,CssBaseline,Button,Icon,Select,MenuItem,FormControl,IconButton}from'@material-ui/core';var CreateProfile=function CreateProfile(_ref){var loadSubjects=_ref.loadSubjects,updateProfile=_ref.updateProfile,_ref$subjects=_ref.subjects,subjects=_ref$subjects.subjects,loading=_ref$subjects.loading,profile=_ref.profile.profile;//list of subject inputs\nvar _useState=useState(['']),_useState2=_slicedToArray(_useState,2),subjectInputs=_useState2[0],setSubjectInputs=_useState2[1];useEffect(function(){loadSubjects();},[]);// eslint-disable-line\nuseEffect(function(){if(subjects){setSubjectInputs([subjects[0].subject]);}if(profile){setSubjectInputs(profile.subjects);}},[subjects,profile]);var handleSubjectChange=function handleSubjectChange(index,e){var values=_toConsumableArray(subjectInputs);values[index]=e.target.value;setSubjectInputs(values);};var addSubject=function addSubject(){var values=_toConsumableArray(subjectInputs);values.push(subjects[0].subject);setSubjectInputs(values);};var removeSubject=function removeSubject(index){var values=_toConsumableArray(subjectInputs);values.splice(index,1);setSubjectInputs(values);};var _onSubmit=function onSubmit(e){e.preventDefault();updateProfile(subjectInputs);};return loading?/*#__PURE__*/React.createElement(Box,{display:\"flex\",justifyContent:\"center\",m:1,p:1},/*#__PURE__*/React.createElement(CircularProgress,null)):/*#__PURE__*/React.createElement(Container,{maxWidth:\"xs\",style:{height:'80vh',marginTop:'32px'}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Box,{display:\"flex\",flexDirection:\"column\",style:{height:'80vh'}},/*#__PURE__*/React.createElement(Link,{to:\"/\",style:{textDecoration:'none'}},/*#__PURE__*/React.createElement(Button,{startIcon:/*#__PURE__*/React.createElement(Icon,null,\"keyboard_backspace\")},\"Back to tasks\")),/*#__PURE__*/React.createElement(Box,{fontSize:\"h4.fontSize\"},/*#__PURE__*/React.createElement(\"b\",null,\"Subjects\")),/*#__PURE__*/React.createElement(Alert,null),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);}},/*#__PURE__*/React.createElement(Box,{mb:2},/*#__PURE__*/React.createElement(Button,{fullWidth:true,variant:\"outlined\",color:\"primary\",startIcon:/*#__PURE__*/React.createElement(Icon,null,\"add\"),value:\"Add Subject\",onClick:addSubject},\"Add\")),subjectInputs.map(function(val,index){return/*#__PURE__*/React.createElement(Box,{mt:1,display:\"flex\"},/*#__PURE__*/React.createElement(Box,{flexGrow:1,mr:1},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",fullWidth:true},/*#__PURE__*/React.createElement(Select,{id:\"subject\",value:subjectInputs[index],onChange:function onChange(e){return handleSubjectChange(index,e);},fullWidth:true},subjects.map(function(item){return/*#__PURE__*/React.createElement(MenuItem,{key:item.value,value:item.subject},item.subject);})))),/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(IconButton,{onClick:function onClick(){return removeSubject(index);}},/*#__PURE__*/React.createElement(Icon,null,\"clear\"))));}),/*#__PURE__*/React.createElement(Box,{mt:2},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",size:\"large\",fullWidth:true},\"Update\"))))));};var mapStateToProps=function mapStateToProps(state){return{subjects:state.subjects,profile:state.profile};};export default connect(mapStateToProps,{loadSubjects:loadSubjects,updateProfile:updateProfile})(CreateProfile);","map":{"version":3,"sources":["/var/www/hwboard.tk/client/src/components/profile-form/CreateProfile.js"],"names":["React","useState","useEffect","Link","connect","loadSubjects","updateProfile","Alert","Box","CircularProgress","Container","CssBaseline","Button","Icon","Select","MenuItem","FormControl","IconButton","CreateProfile","subjects","loading","profile","subjectInputs","setSubjectInputs","subject","handleSubjectChange","index","e","values","target","value","addSubject","push","removeSubject","splice","onSubmit","preventDefault","height","marginTop","textDecoration","map","val","item","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { loadSubjects } from '../../actions/subjects';\nimport { updateProfile } from '../../actions/profile';\n\nimport Alert from '../layout/Alert';\n\nimport {\n  Box,\n  CircularProgress,\n  Container,\n  CssBaseline,\n  Button,\n  Icon,\n  Select,\n  MenuItem,\n  FormControl,\n  IconButton,\n} from '@material-ui/core';\n\nconst CreateProfile = ({\n  loadSubjects,\n  updateProfile,\n  subjects: { subjects, loading },\n  profile: { profile },\n}) => {\n  //list of subject inputs\n  const [subjectInputs, setSubjectInputs] = useState(['']);\n\n  useEffect(() => {\n    loadSubjects();\n  }, []); // eslint-disable-line\n\n  useEffect(() => {\n    if (subjects) {\n      setSubjectInputs([subjects[0].subject]);\n    }\n    if (profile) {\n      setSubjectInputs(profile.subjects);\n    }\n  }, [subjects, profile]);\n\n  const handleSubjectChange = (index, e) => {\n    const values = [...subjectInputs];\n    values[index] = e.target.value;\n    setSubjectInputs(values);\n  };\n\n  const addSubject = () => {\n    const values = [...subjectInputs];\n    values.push(subjects[0].subject);\n    setSubjectInputs(values);\n  };\n\n  const removeSubject = (index) => {\n    const values = [...subjectInputs];\n    values.splice(index, 1);\n    setSubjectInputs(values);\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    updateProfile(subjectInputs);\n  };\n\n  return loading ? (\n    <Box display='flex' justifyContent='center' m={1} p={1}>\n      <CircularProgress />\n    </Box>\n  ) : (\n    <Container maxWidth='xs' style={{ height: '80vh', marginTop: '32px' }}>\n      <CssBaseline />\n      <Box display='flex' flexDirection='column' style={{ height: '80vh' }}>\n        <Link to='/' style={{ textDecoration: 'none' }}>\n          <Button startIcon={<Icon>keyboard_backspace</Icon>}>\n            Back to tasks\n          </Button>\n        </Link>\n        <Box fontSize='h4.fontSize'>\n          <b>Subjects</b>\n        </Box>\n        <Alert />\n        <p>\n          <form onSubmit={(e) => onSubmit(e)}>\n            <Box mb={2}>\n              <Button\n                fullWidth\n                variant='outlined'\n                color='primary'\n                startIcon={<Icon>add</Icon>}\n                value='Add Subject'\n                onClick={addSubject}\n              >\n                Add\n              </Button>\n            </Box>\n\n            {/* Render the inputs for each subject in subjectInputs */}\n            {subjectInputs.map((val, index) => (\n              <Box mt={1} display='flex'>\n                <Box flexGrow={1} mr={1}>\n                  <FormControl variant='outlined' fullWidth>\n                    <Select\n                      id='subject'\n                      value={subjectInputs[index]}\n                      onChange={(e) => handleSubjectChange(index, e)}\n                      fullWidth\n                    >\n                      {subjects.map((item) => (\n                        <MenuItem key={item.value} value={item.subject}>\n                          {item.subject}\n                        </MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Box>\n                <Box>\n                  <IconButton onClick={() => removeSubject(index)}>\n                    <Icon>clear</Icon>\n                  </IconButton>\n                </Box>\n              </Box>\n            ))}\n\n            <Box mt={2}>\n              <Button\n                variant='contained'\n                color='primary'\n                type='submit'\n                size='large'\n                fullWidth\n              >\n                Update\n              </Button>\n            </Box>\n          </form>\n        </p>\n      </Box>\n    </Container>\n  );\n};\n\nCreateProfile.propTypes = {\n  updateProfile: PropTypes.func.isRequired,\n  profile: PropTypes.object.isRequired,\n  subjects: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  subjects: state.subjects,\n  profile: state.profile,\n});\n\nexport default connect(mapStateToProps, { loadSubjects, updateProfile })(\n  CreateProfile\n);\n"]},"metadata":{},"sourceType":"module"}